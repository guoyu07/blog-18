module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"g",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h});var r;process.env.GITHUB_REPOSITORY_NAME,process.env.GITHUB_REPOSITORY_OWNER,process.env.GITHUB_EXCLUDED_LABELS.split(","),function(e){e.user="user",e.organization="organization"}(r||(r={}));var o,i=(process.env.GITHUB_REPOSITORY_OWNER_TYPE,r.user,"Fri, 31 Dec 9999 23:59:59 GMT"),u="LOCALE_COOKIE",a="1stG Blog";!function(e){e.EN="en",e.ZH="zh"}(o||(o={}));var c,s=o.EN,l=o.ZH,f=(c={},c[s]=l,c[l]=s,c),p=o.EN,h=[o.EN,o.ZH]},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("koa")},function(e,t){e.exports=require("koa-compose")},function(e,t){e.exports=require("koa-session")},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return a});var r=n(17),o=(n.n(r),"localhost"),i=7e3,u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.resolve.apply(r,[process.cwd()].concat(e))},a=require},function(e,t,n){"use strict";var r=(n(31),n(33),n(0));n.d(t,"a",function(){return r.b}),n.d(t,"b",function(){return r.c}),n.d(t,"c",function(){return r.d}),n.d(t,"d",function(){return r.f}),n.d(t,"e",function(){return r.g}),n(34),n(37)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),o=(n.n(r),n(10)),i=n.n(o),u=n(2),a=(n.n(u),n(3)),c=(n.n(a),n(11)),s=(n.n(c),n(4)),l=(n.n(s),n(12)),f=(n.n(l),n(13)),p=(n.n(f),n(5)),h=(n.n(p),n(14)),d=(n.n(h),n(15)),b=(n.n(d),n(16)),v=(n.n(b),n(6)),g=n(18),x=n(7),y=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},w=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,a)}c((r=r.apply(e,t||[])).next())})},_=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){c.label=n[1];break}if(6===n[0]&&c.label<u[1]){c.label=u[1],u=n;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(n);break}u[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},T=this;i.a.languages(x.b);var m=process.env,E=m.APP_KEYS,O=m.GITHUB_TOKEN,q=u("1stg:server"),k=new a;k.keys=E.split(",");var N,S=r.readFileSync(Object(v.a)("dist/template.html"),"utf-8"),A=[f(),function(e,t){return w(T,void 0,void 0,function(){var n,r,o,u,a,c,s;return _(this,function(l){switch(l.label){case 0:return n=e.url,"GET"!==e.method||n.lastIndexOf(".")>n.lastIndexOf("/")||!["*/*","text/html"].find(function(t){return e.get("Accept").includes(t)})||/^\/(api|graphql)($|\/)/.test(e.url)?[2,t()]:[4,void 0];case 1:return l.sent(),r=Date.now(),o=e.cookies.get(x.c),u=o||i.a.get(e.get("Accept-Language")),o||e.cookies.set(x.c,u,{httpOnly:!1,path:"/",expires:new Date(x.a)}),a={ctx:e,locale:u,title:x.d},e.respond=!1,e.status=200,e.set({"Content-Type":"text/html"}),c=e.res,s=N.renderToStream(a).on("error",function(t){switch(e.status=t.status||500){case 302:return e.set({Location:t.url}),c.end();case 401:return e.redirect("/login?next="+n),c.end();case 404:return c.end("404 | Page Not Found");default:c.end("500 | Internal Server Error"),q("error during render : "+n),console.error(t.stack)}}).on("end",function(){q("whole request: "+(Date.now()-r)+"ms")}),s.pipe(c),[2]}})})}],I=h("public",{maxAge:31536e6}),j=p({},k);N=function(e,t){return Object(b.createBundleRenderer)(e,y({},t,{template:S,inject:!1,cache:d({max:1e3,maxAge:9e5}),basedir:Object(v.a)("dist/static"),runInNewContext:!1}))}(Object(v.b)(Object(v.a)("dist/vue-ssr-server-bundle.json")),{clientManifest:Object(v.b)(Object(v.a)("dist/vue-ssr-client-manifest.json"))});var P={};A.splice.apply(A,[1,0,l(),I,h("dist/static",{maxAge:31536e6},P),j].concat(Object(g.a)(k))),P["/service-worker.js"].maxAge=0,A.push(c("api.github.com/graphql",{filter:function(e){return"/graphql"===e.url},https:!0,proxyReqOptDecorator:function(e,t){return e.headers.Authorization="bearer "+(t.session.token||O),e}})),k.use(s(A)),k.listen(v.d,v.c,function(){q("Server is now running at %s:%s",v.c,v.d)})},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("accept-language")},function(e,t){e.exports=require("koa-better-http-proxy")},function(e,t){e.exports=require("koa-compress")},function(e,t){e.exports=require("koa-logger")},function(e,t){e.exports=require("koa-static-cache")},function(e,t){e.exports=require("lru-cache")},function(e,t){e.exports=require("vue-server-renderer")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var r=n(19),o=(n.n(r),n(20)),i=n.n(o),u=n(21),a=(n.n(u),n(1)),c=n.n(a),s=n(2),l=(n.n(s),n(22)),f=n.n(l),p=n(3),h=(n.n(p),n(23)),d=(n.n(h),n(4)),b=(n.n(d),n(24)),v=(n.n(b),n(5)),g=(n.n(v),n(25)),x=n.n(g),y=n(26),w=(n.n(y),n(6)),_=n(27),T=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},m=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,a)}c((r=r.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){c.label=n[1];break}if(6===n[0]&&c.label<u[1]){c.label=u[1],u=n;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(n);break}u[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},O=this;global.fetch=x.a;var q=process.env,k=q.APP_KEYS,N=q.GITHUB_CLIENT_ID,S=q.GITHUB_CLIENT_SECRET,A=s("1stg:server:router"),I=new b({prefix:"/api"});I.get("/user",function(e,t){var n,r=e.session.user;r||(n=y(),e.session.uuid=n),e.body=r||{uuid:n}}).get("/oauth",function(e,t){return m(O,void 0,void 0,function(){var t,n,o,a,s,l,p,h;return E(this,function(d){switch(d.label){case 0:return t=e.query,n=t.code,o=t.path,a=t.state,a&&a===e.session.uuid?[4,c.a.post("https://github.com/login/oauth/access_token",{client_id:N,client_secret:S,code:n,state:a},{headers:{Accept:"application/json"}})]:[2,e.throw("invalid oauth redirect")];case 1:return s=d.sent().data,s.error?[2,e.throw(s)]:(l=s.access_token,e.session.token=l,p=new i.a({link:Object(u.createHttpLink)({uri:"https://api.github.com/graphql",headers:{Authorization:"bearer "+l}}),cache:new r.InMemoryCache}),[4,p.query({query:f()(j||(j=T(["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "],["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "])))})]);case 2:return h=d.sent().data,e.session.user=h.viewer,e.redirect(""+o.replace(/ /g,"%2B")),[2]}})})}).get("/translate",_.a),t.a=function(e){var t=!!e,n=[h(),I.routes(),I.allowedMethods()];if(e||(e=new p,e.keys=e.keys=k.split(","),n.unshift(v({},e))),t)return n;e.use(d(n)),e.listen(w.d+1,w.c,function(){A("Router server is now running at %s:%s",w.c,w.d+1)})};var j},function(e,t){e.exports=require("apollo-cache-inmemory")},function(e,t){e.exports=require("apollo-client")},function(e,t){e.exports=require("apollo-link-http")},function(e,t){e.exports=require("graphql-tag")},function(e,t){e.exports=require("koa-bodyparser")},function(e,t){e.exports=require("koa-router")},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("uuid")},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(28),u=(n.n(i),n(29)),a=(n.n(u),n(30)),c=(n.n(a),n(7)),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,a)}c((r=r.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(u=u.call(i,n[1])).done)return u;switch(i=0,u&&(n=[0,u.value]),n[0]){case 0:case 1:u=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){c.label=n[1];break}if(6===n[0]&&c.label<u[1]){c.label=u[1],u=n;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(n);break}u[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},p=this,h=process.env,d=h.GOOGLE_TRANSLATE_ENABLED,b=h.TENCENT_TRANSLATE_API_SECRET_ID,v=h.TENCENT_TRANSLATE_API_SECRET_KEY,g={Action:"TextTranslate",Region:"ap-shanghai",SecretId:b,SignatureMethod:"HmacSHA256"},x=function(e){return s({},g,{Timestamp:Math.ceil(Date.now()/1e3),Nonce:Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)},e,{target:c.e[e.source]})},y=function(e,t){return e>t?1:e<t?-1:0},w={zh:"zh-cn",en:"en"},_=function(e,t){return l(p,void 0,void 0,function(){var t,n,r,l,p,h,b,g;return f(this,function(f){switch(f.label){case 0:return t=e.query,n=t.source,r=t.sourceText,r?d?[4,u(r,{from:w[n],to:c.e[n]})]:[3,2]:[2];case 1:return l=f.sent(),e.body=Object.assign(l,{text:l.text.replace(/<\/ ([^<>]+)>/g,"</$1>")}),[2];case 2:return p=x({source:n||e.cookies.get(c.c),sourceText:r}),h=i.createHmac("sha256",v).update("GETtmt.api.qcloud.com/v2/index.php?"+a.stringify(p,{encode:!1,sort:y})).digest("base64"),[4,o.a.get("https://tmt.api.qcloud.com/v2/index.php",{params:Object.assign(p,{Signature:h})})];case 3:return b=f.sent().data,g=b.targetText,e.body=s({},b,{targetText:g&&g.replace(/\<([^<>]+)\>/g,function(e,t){t=t.toLowerCase().replace(/ /g,"").replace(/\/+/g,"/");var n=t.indexOf("/");return-1!==n&&(t=t.substr(n)),"<"+t+">"})}),[2]}})})};t.a=_},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("google-translate-api")},function(e,t){e.exports=require("qs")},function(e,t,n){"use strict";var r=n(32);n.n(r).a},function(e,t){e.exports=require("invert-color")},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict";var r,o=n(35),i=(n.n(o),n(36)),u=(n.n(i),n(0));r={},r[u.e.EN]=i.enUS,r[u.e.ZH]=i.zhCN},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("date-fns/locale")},function(e,t,n){"use strict";var r,o=n(1),i=(n.n(o),n(0));!function(e){e.TITLE="title",e.CONTENT="content"}(r||(r={}));var u,a,c=function(e){return{locale:e,value:"["+e+"]"}},s=function(e){return{locale:e,value:"<p>["+e+"]</p>"}};u={},u[r.TITLE]=i.c.map(c),u[r.CONTENT]=i.c.map(s),a={},a[r.TITLE]=c("_end_").value,a[r.CONTENT]=s("<em>end</em>").value}]);