module.exports=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"d",function(){return u}),t.d(n,"f",function(){return c}),t.d(n,"e",function(){return o}),t.d(n,"a",function(){return f}),t.d(n,"c",function(){return p});var r;process.env.GITHUB_REPOSITORY_NAME,process.env.GITHUB_REPOSITORY_OWNER,process.env.GITHUB_EXCLUDED_LABELS.split(","),function(e){e.user="user",e.organization="organization"}(r||(r={}));var o,i=(process.env.GITHUB_REPOSITORY_OWNER_TYPE,r.user,"Fri, 31 Dec 9999 23:59:59 GMT"),u="LOCALE_COOKIE",c="1stG Blog";!function(e){e.EN="en",e.ZH="zh"}(o||(o={}));var a,s=o.EN,l=o.ZH,f=(a={},a[s]=l,a[l]=s,o.EN),p=[o.EN,o.ZH]},function(e,n){e.exports=require("debug")},function(e,n){e.exports=require("koa")},function(e,n){e.exports=require("koa-compose")},function(e,n){e.exports=require("koa-session")},function(e,n,t){"use strict";t.d(n,"c",function(){return o}),t.d(n,"d",function(){return i}),t.d(n,"a",function(){return u}),t.d(n,"b",function(){return c});var r=t(15),o=(t.n(r),"localhost"),i=7e3,u=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r.resolve.apply(r,[process.cwd()].concat(e))},c=require},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(7),o=(t.n(r),t(8)),i=t.n(o),u=t(1),c=(t.n(u),t(2)),a=(t.n(c),t(9)),s=(t.n(a),t(3)),l=(t.n(s),t(10)),f=(t.n(l),t(11)),p=(t.n(f),t(4)),d=(t.n(p),t(12)),h=(t.n(d),t(13)),v=(t.n(h),t(14)),b=(t.n(v),t(5)),x=t(16),g=t(26),y=this&&this.__assign||Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},m=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(e,a)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},_=this;i.a.languages(g.b);var q=process.env,O=q.APP_KEYS,E=q.GITHUB_TOKEN,T=u("1stg:server"),k=new c;k.keys=O.split(",");var j,I=r.readFileSync(Object(b.a)("dist/template.html"),"utf-8"),N=[f(),function(e,n){return w(_,void 0,void 0,function(){var t,r,o,u,c,a,s;return m(this,function(l){switch(l.label){case 0:return t=e.url,"GET"!==e.method||t.lastIndexOf(".")>t.lastIndexOf("/")||!["*/*","text/html"].find(function(n){return e.get("Accept").includes(n)})||/^\/(api|graphql)($|\/)/.test(e.url)?[2,n()]:[4,void 0];case 1:return l.sent(),r=Date.now(),o=e.cookies.get(g.c),u=o||i.a.get(e.get("Accept-Language")),o||e.cookies.set(g.c,u,{httpOnly:!1,path:"/",expires:new Date(g.a)}),c={ctx:e,locale:u,title:g.d},e.respond=!1,e.status=200,e.set({"Content-Type":"text/html"}),a=e.res,s=j.renderToStream(c).on("error",function(n){switch(e.status=n.status||500){case 302:return e.set({Location:n.url}),a.end();case 401:return e.redirect("/login?next="+t),a.end();case 404:return a.end("404 | Page Not Found");default:a.end("500 | Internal Server Error"),T("error during render : "+t),console.error(n.stack)}}).on("end",function(){T("whole request: "+(Date.now()-r)+"ms")}),s.pipe(a),[2]}})})}],P=d("public",{maxAge:31536e6}),S=p({},k);j=function(e,n){return Object(v.createBundleRenderer)(e,y({},n,{template:I,inject:!1,cache:h({max:1e3,maxAge:9e5}),basedir:Object(b.a)("dist/static"),runInNewContext:!1}))}(Object(b.b)(Object(b.a)("dist/vue-ssr-server-bundle.json")),{clientManifest:Object(b.b)(Object(b.a)("dist/vue-ssr-client-manifest.json"))});var A={};N.splice.apply(N,[1,0,l(),P,d("dist/static",{maxAge:31536e6},A),S].concat(Object(x.a)(k))),A["/service-worker.js"].maxAge=0,N.push(a("api.github.com/graphql",{filter:function(e){return"/graphql"===e.url},https:!0,proxyReqOptDecorator:function(e,n){return e.headers.Authorization="bearer "+(n.session.token||E),e}})),k.use(s(N)),k.listen(b.d,b.c,function(){T("Server is now running at %s:%s",b.c,b.d)})},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("accept-language")},function(e,n){e.exports=require("koa-better-http-proxy")},function(e,n){e.exports=require("koa-compress")},function(e,n){e.exports=require("koa-logger")},function(e,n){e.exports=require("koa-static-cache")},function(e,n){e.exports=require("lru-cache")},function(e,n){e.exports=require("vue-server-renderer")},function(e,n){e.exports=require("path")},function(e,n,t){"use strict";var r=t(17),o=(t.n(r),t(18)),i=t.n(o),u=t(19),c=(t.n(u),t(20)),a=t.n(c),s=t(1),l=(t.n(s),t(21)),f=t.n(l),p=t(2),d=(t.n(p),t(22)),h=(t.n(d),t(3)),v=(t.n(h),t(23)),b=(t.n(v),t(4)),x=(t.n(b),t(24)),g=t.n(x),y=t(25),w=(t.n(y),t(5)),m=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},_=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},q=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(e,a)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},O=this;global.fetch=g.a;var E=process.env,T=E.APP_KEYS,k=E.GITHUB_CLIENT_ID,j=E.GITHUB_CLIENT_SECRET,I=s("1stg:server:router"),N=new v({prefix:"/api"});N.get("/user",function(e,n){var t,r=e.session.user;r||(t=y(),e.session.uuid=t),e.body=r||{uuid:t}}).get("/oauth",function(e,n){return _(O,void 0,void 0,function(){var n,t,o,c,s,l,p,d;return q(this,function(h){switch(h.label){case 0:return n=e.query,t=n.code,o=n.path,c=n.state,c&&c===e.session.uuid?[4,a.a.post("https://github.com/login/oauth/access_token",{client_id:k,client_secret:j,code:t,state:c},{headers:{Accept:"application/json"}})]:[2,e.throw("invalid oauth redirect")];case 1:return s=h.sent().data,s.error?[2,e.throw(s)]:(l=s.access_token,e.session.token=l,p=new i.a({link:Object(u.createHttpLink)({uri:"https://api.github.com/graphql",headers:{Authorization:"bearer "+l}}),cache:new r.InMemoryCache}),[4,p.query({query:f()(P||(P=m(["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "],["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "])))})]);case 2:return d=h.sent().data,e.session.user=d.viewer,e.redirect(""+o.replace(/ /g,"%2B")),[2]}})})}),n.a=function(e){var n=!!e,t=[d(),N.routes(),N.allowedMethods()];if(e||(e=new p,e.keys=e.keys=T.split(","),t.unshift(b({},e))),n)return t;e.use(h(t)),e.listen(w.d+1,w.c,function(){I("Router server is now running at %s:%s",w.c,w.d+1)})};var P},function(e,n){e.exports=require("apollo-cache-inmemory")},function(e,n){e.exports=require("apollo-client")},function(e,n){e.exports=require("apollo-link-http")},function(e,n){e.exports=require("axios")},function(e,n){e.exports=require("graphql-tag")},function(e,n){e.exports=require("koa-bodyparser")},function(e,n){e.exports=require("koa-router")},function(e,n){e.exports=require("node-fetch")},function(e,n){e.exports=require("uuid")},function(e,n,t){"use strict";var r=(t(27),t(29),t(0));t.d(n,"a",function(){return r.b}),t.d(n,"b",function(){return r.c}),t.d(n,"c",function(){return r.d}),t.d(n,"d",function(){return r.f}),t(30),t(33)},function(e,n,t){"use strict";var r=t(28);t.n(r).a},function(e,n){e.exports=require("invert-color")},function(e,n,t){"use strict";t(0)},function(e,n,t){"use strict";var r,o=t(31),i=(t.n(o),t(32)),u=(t.n(i),t(0));r={},r[u.e.EN]=i.enUS,r[u.e.ZH]=i.zhCN},function(e,n){e.exports=require("date-fns")},function(e,n){e.exports=require("date-fns/locale")},function(e,n,t){"use strict";var r,o=t(0);!function(e){e.TITLE="title",e.CONTENT="content"}(r||(r={}));var i,u,c=function(e){return{locale:e,value:"["+e+"]"}},a=function(e){return{locale:e,value:"<p>["+e+"]</p>"}};i={},i[r.TITLE]=o.c.map(c),i[r.CONTENT]=o.c.map(a),u={},u[r.TITLE]=c("_end_").value,u[r.CONTENT]=a("<em>end</em>").value}]);