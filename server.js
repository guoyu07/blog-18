module.exports=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=9)}([function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"f",function(){return c}),t.d(n,"b",function(){return s}),t.d(n,"d",function(){return l}),t.d(n,"g",function(){return f}),t.d(n,"e",function(){return a}),t.d(n,"h",function(){return b}),t.d(n,"c",function(){return g});var r,o=process.env.GITHUB_REPOSITORY_NAME,i=process.env.GITHUB_REPOSITORY_OWNER,u=process.env.GITHUB_EXCLUDED_LABELS.split(",");!function(e){e.user="user",e.organization="organization"}(r||(r={}));var a,c=(process.env.GITHUB_REPOSITORY_OWNER_TYPE,r.user,{name:o,owner:i}),s="Fri, 31 Dec 9999 23:59:59 GMT",l="LOCALE_COOKIE",f="1stG Blog";!function(e){e.EN="en",e.ZH="zh"}(a||(a={}));var p,h=a.EN,d=a.ZH,b=(p={},p[h]=d,p[d]=h,p),g=(a.EN,[a.EN,a.ZH])},function(e,n){e.exports=require("debug")},function(e,n){e.exports=require("koa")},function(e,n){e.exports=require("koa-compose")},function(e,n){e.exports=require("koa-session")},function(e,n,t){"use strict";t.d(n,"c",function(){return o}),t.d(n,"d",function(){return i}),t.d(n,"a",function(){return u}),t.d(n,"b",function(){return a});var r=t(18),o=(t.n(r),"localhost"),i=+process.env.PORT||7e3,u=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r.resolve.apply(r,[process.cwd()].concat(e))},a=require},function(e,n){e.exports=require("axios")},function(e,n){e.exports=require("graphql-tag")},function(e,n,t){"use strict";var r=(t(31),t(32),t(34),t(0));t.d(n,"a",function(){return r.b}),t.d(n,"b",function(){return r.c}),t.d(n,"c",function(){return r.d}),t.d(n,"d",function(){return r.g}),t.d(n,"e",function(){return r.h}),t(35)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(10),o=(t.n(r),t(11)),i=t.n(o),u=t(1),a=(t.n(u),t(2)),c=(t.n(a),t(12)),s=(t.n(c),t(3)),l=(t.n(s),t(13)),f=(t.n(l),t(14)),p=(t.n(f),t(4)),h=(t.n(p),t(15)),d=(t.n(h),t(16)),b=(t.n(d),t(17)),g=(t.n(b),t(5)),v=t(19),y=t(8),x=this&&this.__assign||Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,a)}c((r=r.apply(e,n||[])).next())})},m=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(e,c)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},_=this;i.a.languages(y.b);var E=process.env,O=E.APP_KEYS,q=E.GITHUB_TOKEN,T=u("1stg:server"),k=new a;k.keys=O.split(",");var S,j=r.readFileSync(Object(g.a)("dist/template.html"),"utf-8"),A=[f(),function(e,n){return w(_,void 0,void 0,function(){var t,r,o,u,a,c,s;return m(this,function(l){switch(l.label){case 0:return t=e.url,"GET"!==e.method||t.lastIndexOf(".")>t.lastIndexOf("/")||!["*/*","text/html"].find(function(n){return e.get("Accept").includes(n)})||/^\/(api|graphql)($|\/)/.test(e.url)?[2,n()]:[4,void 0];case 1:return l.sent(),r=Date.now(),o=e.cookies.get(y.c),u=o||i.a.get(e.get("Accept-Language")),o||e.cookies.set(y.c,u,{httpOnly:!1,path:"/",expires:new Date(y.a)}),a={ctx:e,locale:u,title:y.d},e.respond=!1,e.status=200,e.set({"Content-Type":"text/html"}),c=e.res,s=S.renderToStream(a).on("error",function(n){switch(e.status=n.status||500){case 302:return e.set({Location:n.url}),c.end();case 401:return e.redirect("/login?next="+t),c.end();case 404:return c.end("404 | Page Not Found");default:c.end("500 | Internal Server Error"),T("error during render : "+t),console.error(n.stack)}}).on("end",function(){T("whole request: "+(Date.now()-r)+"ms")}),s.pipe(c),[2]}})})}],N=h("public",{maxAge:31536e6}),I=p({},k);S=function(e,n){return Object(b.createBundleRenderer)(e,x({},n,{template:j,inject:!1,cache:d({max:1e3,maxAge:9e5}),basedir:Object(g.a)("dist/static"),runInNewContext:!1}))}(Object(g.b)(Object(g.a)("dist/vue-ssr-server-bundle.json")),{clientManifest:Object(g.b)(Object(g.a)("dist/vue-ssr-client-manifest.json"))});var P={};A.splice.apply(A,[1,0,l(),N,h("dist/static",{maxAge:31536e6},P),I].concat(Object(v.a)(k))),P["/service-worker.js"].maxAge=0,A.push(c("api.github.com/graphql",{filter:function(e){return"/graphql"===e.url},https:!0,proxyReqOptDecorator:function(e,n){return e.headers.Authorization="bearer "+(n.session.token||q),e}})),k.use(s(A)),k.listen(g.d,g.c,function(){T("Server is now running at %s:%s",g.c,g.d)})},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("accept-language")},function(e,n){e.exports=require("koa-better-http-proxy")},function(e,n){e.exports=require("koa-compress")},function(e,n){e.exports=require("koa-logger")},function(e,n){e.exports=require("koa-static-cache")},function(e,n){e.exports=require("lru-cache")},function(e,n){e.exports=require("vue-server-renderer")},function(e,n){e.exports=require("path")},function(e,n,t){"use strict";var r=t(20),o=(t.n(r),t(21)),i=t.n(o),u=t(22),a=(t.n(u),t(6)),c=t.n(a),s=t(1),l=(t.n(s),t(7)),f=t.n(l),p=t(2),h=(t.n(p),t(23)),d=(t.n(h),t(3)),b=(t.n(d),t(24)),g=(t.n(b),t(4)),v=(t.n(g),t(25)),y=t.n(v),x=t(26),w=(t.n(x),t(5)),m=t(27),_=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},E=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,a)}c((r=r.apply(e,n||[])).next())})},O=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(e,c)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},q=this;global.fetch=y.a;var T=process.env,k=T.APP_KEYS,S=T.GITHUB_CLIENT_ID,j=T.GITHUB_CLIENT_SECRET,A=s("1stg:server:router"),N=new b({prefix:"/api"});N.get("/user",function(e,n){var t,r=e.session.user;r||(t=x(),e.session.uuid=t),e.body=r||{uuid:t}}).get("/oauth",function(e,n){return E(q,void 0,void 0,function(){var n,t,o,a,s,l,p,h;return O(this,function(d){switch(d.label){case 0:return n=e.query,t=n.code,o=n.path,a=n.state,a&&a===e.session.uuid?[4,c.a.post("https://github.com/login/oauth/access_token",{client_id:S,client_secret:j,code:t,state:a},{headers:{Accept:"application/json"}})]:[2,e.throw("invalid oauth redirect")];case 1:return s=d.sent().data,s.error?[2,e.throw(s)]:(l=s.access_token,e.session.token=l,p=new i.a({link:Object(u.createHttpLink)({uri:"https://api.github.com/graphql",headers:{Authorization:"bearer "+l}}),cache:new r.InMemoryCache}),[4,p.query({query:f()(I||(I=_(["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "],["\n        query {\n          viewer {\n            avatarUrl\n            id\n            login\n            name\n            url\n            websiteUrl\n          }\n        }\n      "])))})]);case 2:return h=d.sent().data,e.session.user=h.viewer,e.redirect(""+o.replace(/ /g,"%2B")),[2]}})})}).get("/translate",m.a),n.a=function(e){var n=!!e,t=[h(),N.routes(),N.allowedMethods()];if(e||(e=new p,e.keys=e.keys=k.split(","),t.unshift(g({},e))),n)return t;e.use(d(t)),e.listen(w.d+1,w.c,function(){A("Router server is now running at %s:%s",w.c,w.d+1)})};var I},function(e,n){e.exports=require("apollo-cache-inmemory")},function(e,n){e.exports=require("apollo-client")},function(e,n){e.exports=require("apollo-link-http")},function(e,n){e.exports=require("koa-bodyparser")},function(e,n){e.exports=require("koa-router")},function(e,n){e.exports=require("node-fetch")},function(e,n){e.exports=require("uuid")},function(e,n,t){"use strict";var r=t(6),o=t.n(r),i=t(28),u=(t.n(i),t(29)),a=(t.n(u),t(30)),c=(t.n(a),t(8)),s=this&&this.__assign||Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,a)}c((r=r.apply(e,n||[])).next())})},f=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(e,c)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},p=this,h=process.env,d=h.GOOGLE_TRANSLATE_ENABLED,b=h.TENCENT_TRANSLATE_API_SECRET_ID,g=h.TENCENT_TRANSLATE_API_SECRET_KEY,v={Action:"TextTranslate",Region:"ap-shanghai",SecretId:b,SignatureMethod:"HmacSHA256"},y=function(e){return s({},v,{Timestamp:Math.ceil(Date.now()/1e3),Nonce:Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)},e,{target:c.e[e.source]})},x=function(e,n){return e>n?1:e<n?-1:0},w={zh:"zh-cn",en:"en"},m=function(e,n){return l(p,void 0,void 0,function(){var n,t,r,l,p,h,b,v;return f(this,function(f){switch(f.label){case 0:return n=e.query,t=n.source,r=n.sourceText,r?d?[4,u(r,{from:w[t],to:c.e[t]})]:[3,2]:[2];case 1:return l=f.sent(),e.body=Object.assign(l,{text:l.text.replace(/<\/ ([^<>]+)>/g,"</$1>")}),[2];case 2:return p=y({source:t||e.cookies.get(c.c),sourceText:r}),h=i.createHmac("sha256",g).update("GETtmt.api.qcloud.com/v2/index.php?"+a.stringify(p,{encode:!1,sort:x})).digest("base64"),[4,o.a.get("https://tmt.api.qcloud.com/v2/index.php",{params:Object.assign(p,{Signature:h})})];case 3:return b=f.sent().data,v=b.targetText,e.body=s({},b,{targetText:v&&v.replace(/\<([^<>]+)\>/g,function(e,n){n=n.toLowerCase().replace(/ /g,"").replace(/\/+/g,"/");var t=n.indexOf("/");return-1!==t&&(n=n.substr(t)),"<"+n+">"})}),[2]}})})};n.a=m},function(e,n){e.exports=require("crypto")},function(e,n){e.exports=require("google-translate-api")},function(e,n){e.exports=require("qs")},function(e,n,t){"use strict";var r,o=t(7),i=t.n(o),u=t(0),a=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};this&&this.__assign||Object.assign,i()(r||(r=a(["\n    query($name: String!, $owner: String!) {\n      repository(name: $name, owner: $owner) {\n        labels(first: 100) {\n          nodes {\n            color\n            id\n            name\n          }\n        }\n      }\n    }\n  "],["\n    query($name: String!, $owner: String!) {\n      repository(name: $name, owner: $owner) {\n        labels(first: 100) {\n          nodes {\n            color\n            id\n            name\n          }\n        }\n      }\n    }\n  "]))),u.f},function(e,n,t){"use strict";var r=t(33);t.n(r).a},function(e,n){e.exports=require("invert-color")},function(e,n,t){"use strict";t(0)},function(e,n,t){"use strict";var r,o=t(36),i=(t.n(o),t(37)),u=(t.n(i),t(0));r={},r[u.e.EN]=i.enUS,r[u.e.ZH]=i.zhCN},function(e,n){e.exports=require("date-fns")},function(e,n){e.exports=require("date-fns/locale")}]);